<h1> <%=@user.name %></h1>

<% if @trips.first == nil %>
  <h2><%= "No trips for #{@user.name}" %></h2>
<br>







<% elsif @trips.first.passenger == @user %>
<%= link_to "Request Ride", passenger_trips_path(@user.id), method: :post %>
<%= link_to "Edit This Passenger", edit_passenger_path(@user.id) %>
<%= link_to "Delete This Passenger", passenger_path(@user.id), method: :delete,
   data: { confirm: "Are you sure you want to delete this passenger?" } %>

<table class="highlight">

 <thead>
   <tr>
     <th>ID</th>
     <th>Name</th>
     <th>Price</th>
     <th>Date</th>
   </tr>
 </thead>

 <tbody>
  <% @trips.each do |t| %>
  <tr>
    <td><%= link_to "#{t.id}", trip_path(t.id) %></td>
    <td><%= link_to "#{t.driver.name}", driver_trips_path(t.driver.id) %></td>
    <td><%= number_to_currency(t.cost/100) %></td>
    <td><%= t.date.strftime("%b %d %Y") %></td>
  </tr>
  <% end %>
  </tbody>

  <tfoot>
    <tr>
      <td><%= "Total Charges" %></td>
      <td><%= number_to_currency(@user.total_charges/100) %></td>
    </tr>
  </tfoot>

</table>




<% elsif @trips.first.driver == @user %>
  <%= link_to "Edit This Driver", edit_driver_path(@user.id) %>
  <%= link_to "Delete This Driver", driver_path(@user.id), method: :delete,
     data: { confirm: "Are you sure you want to delete this driver?" } %>
  <br>
    <% if @user.status %>
      <%= "Available" %>
    <% else %>
      <%= "Unavailable" %>
    <% end %>

<table class="highlight">

  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Price</th>
      <th>Date</th>
      <th>Rating</th>
    </tr>
  </thead>

  <% @trips.each do |t| %>
    <%= link_to "#{t.id}", trip_path(t.id) %>
    <%= link_to "#{t.passenger.name}", passenger_trips_path(t.passenger.id) %>
    <%= number_to_currency(t.cost/100) %>
    <%= t.date.strftime("%b %d %Y") %>
    <%= t.rating %>
    <br>
  <% end %>

<%= "Total Earnings" %>
<%= number_to_currency(@user.total_earnings/100) %>

<%= "Average Rating: " %>
<%= "%.2f" % @user.average_rating %>

<% end %>
